type Question @model
  @auth(rules: [
    { allow: public, provider: apiKey, operations: [read] },
    { allow: private, provider: userPools, operations: [create, update, delete] }
  ]) {
  id: ID!
  question: String!
  choices: [String!]!
  answer: String!
  explanation: String
  topic: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type QuizHistory @model
  @auth(rules: [
    { allow: owner, operations: [create, read] },           # Logged-in users save/view their own quizzes
    { allow: groups, groups: ["Admin"], operations: [create, read, update, delete] } # Admins full access
  ]) {
  id: ID!
  userId: String!
  score: Int
  total: Int
  answers: AWSJSON
  createdAt: AWSDateTime
}
